stations_list:
  description: Return a list of all weather stations with their UUIDs and names
  tool: psql "$FUNGHI_DATABASE" -c "SELECT id, name, altitude FROM stations"

actual_station_data:
  description: Return the latest 30 days of weather data for a specific station by its UUID. Default for actual weather data
  arguments:
    uuid:
        description: "The UUID of the weather station"
  tool: >
    psql "$FUNGHI_DATABASE" -c "
      SELECT
        TO_CHAR(date::date, 'yyyy-mm-dd')    AS day,
        round(avg_temperature / 10.0, 1)     AS avgtemp,
        round(min_temperature / 10.0, 1)     AS mintemp,
        round(max_temperature / 10.0, 1)     AS maxtemp,
        round(rainfall / 10.0, 1)            AS rain,
        min_humidity,
        max_humidity,
        avg_humidity
      FROM history
      WHERE date >= NOW() - INTERVAL '31 days' AND station = '{{uuid}}'
    "

historical_station_data:
  description: Return historical weather data for a specific station by its UUID within a date range, use it only if you need data older than 20 days
  arguments:
    uuid:
        description: "The UUID of the weather station"
    from:
        description: "The start date for the data range (YYYY-MM-DD)"
    to:
        description: "The end date for the data range (YYYY-MM-DD)"
  tool: >
    psql "$FUNGHI_DATABASE" -c "
    SELECT
      TO_CHAR(date::date, 'yyyy-mm-dd')    AS day,
      round(avg_temperature / 10.0, 1)     AS avgtemp,
      round(min_temperature / 10.0, 1)     AS mintemp,
      round(max_temperature / 10.0, 1)     AS maxtemp,
      round(rainfall / 10.0, 1)            AS rain,
      min_humidity,
      max_humidity,
      avg_humidity
    FROM history
    WHERE station = '{{uuid}}' AND date >= '{{from}}'::date AND date <= '{{to}}'::date
    "

